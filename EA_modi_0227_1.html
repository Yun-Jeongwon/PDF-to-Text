<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>modi_0227</title>
    <script defer src = "https://pyscript.net/alpha/pyscript.js"> </script>
    <!-- pyscript 사용 가능하게 함 -->
</head>

<body>
    <style>
        body{
            margin:0px;
        }
        h1{
            text-align: center;
            padding: 60px;
            margin: 0px;
            border-bottom: 4px solid;
            font-weight: bold;
            color: black;
        }
        #main{
            width : 6% ;
            position: absolute ;
            top: 35px;
            left: 520px;
        }
        #category{
            margin:0px;
            border-right:black 1px solid;
            font-family: 'Nanum Myeongjo';
        }
        #category li, h3{
            margin: 0px;
            padding: 15px;
            color:black;
        }
        #category a{
            text-decoration:none;
        }
        #grid{
            display: grid;
            grid-template-columns: 160px 1fr;
        }
        #pdfShow {
            text-align: center;
            height: 650px;
            width : 1000px;
            padding : 40px;
            font-family: "Sans-Serif";
}
    </style>

    <h1>Convert PDF to Text : 원애연 졸업작품</h1>
    <div id="grid">
        <div id="category">
            <h3 style="border-bottom:black 1px solid;">category 목록</h3>
            <a href="이동할페이지1.html" target="board">
                <li class="list" onclick="Clicked(this);">기능1</li></a>
            <a href="이동할페이지2.html" target="board">
                <li class="list" onclick="Clicked(this);">기능2</li></a>
            <a href="이동할페이지3.html" target="board">
                <li class="list" onclick="Clicked(this);">기능3</li></a>
    </div>
    <div id="pdfShow">
            <!--<div>Shift/Ctrl 키로 다중 파일 선택<div> 
            <div><input type="file" multiple/></div>
            <br>
            <div>단일 파일 선택</div>
            <div><input type="file"/></div> -->
        <form>
            <div>
            <input type="file" id="file_upload" accept=".pdf" >
            <!-- 파일타입: pdf only / 단일 파일만 입력 가능     >>수정 가능<<   -->

            <!-- <input type="submit"> -->
            <!-- 제출 버튼 -->

            <p id="status"></p>
            <iframe  id = "pdfFrame" src = "" name = "frameNAME" > </iframe>
            
            
            <py-script>
                <!-- 함수 선언 (2개)-->
                def _extractData():
                    <!--
                    > 파라미터: pdf파일
                    > 자료구조: dictionary  =>  value:key = 페이지번호:text 데이터(string)
                                global Var 선언

                    1. text 추출                            => 자료구조에 추가
                    2. img 추출 후 OCR                      => 자료구조에 추가
                    3. text 제거 + img 제거                 => 자료구조에 추가
                    4. 3번 과정으로 손글씨만 남은 img OCR   => 자료구조에 추가
                        
                    > return: 자료구조
                    -->
                    return 



                def _searchData():
                    <!--
                    > 파라미터: string
                    
                    1. 자료구조(전역변수)를 파라미터로 받은 string으로 검색
                    2. 검색 결과로 페이지 번호 데이터 저장
                        2.1 리스트로
                        2.2
                    3.

                    > return: 페이지 번호 정보 
                    -->
                    return 

            </py-script>


            <script>
                const status = document.getElementById('status');
                // const output = document.getElementById('output');
                if (window.FileList && window.File && window.FileReader) {
                    document.getElementById('file_upload').addEventListener('change', event => {
                        // output.src = '';
                        status.textContent = '';
                        const file = event.target.files[0];
                        if (!file.type) {status.textContent = 'Error: The File.type property does not appear to be supported on this browser.';
                        return;
                    }

                    //  변수가 상수로 선언하지 않아도 -> 됨


                    if(!file.type.match('.pdf')) {
                        status.textContent = 'Error: The selected file does not appear to be a pdf.';
                        return;
                    }
                    if (file.type.match('.pdf')) {
                        const reader = new FileReader();
                        reader.addEventListener('load', event => {
                            pdfFrame.style = "width:70vw; height:120vh";
                            //vw : view width & vh : view height
                            //https://stackoverflow.com/questions/13218687/set-auto-height-for-iframe
                            //페이지 곱하기..?
                            pdfFrame.src = event.target.result;
                            //pdfFrame.src = event.target.result+"#page=3";     // 3페이지로 지정하여 pdf 열기
                        })
                        reader.readAsDataURL(file);
                    }


                }); 
                }
            </script>
            
            
              <p></p>
            </div>
          </form>
    </div>
</body>
</html>
